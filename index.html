<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping Pong - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ W/S –∏ —Å—É–ø–µ—Ä —É–¥–∞—Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            padding: 20px;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1000px;
            width: 100%;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 8px;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0a0c0;
            margin-bottom: 20px;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-bottom: 30px;
        }
        
        .game-wrapper {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }
        
        canvas {
            display: block;
            background-color: #0f3460;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            height: auto;
        }
        
        .game-ui {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            margin-top: 20px;
        }
        
        .score-board {
            display: flex;
            justify-content: space-between;
            width: 100%;
            background: rgba(15, 52, 96, 0.7);
            border-radius: 10px;
            padding: 15px 25px;
            margin-bottom: 20px;
        }
        
        .player-score, .computer-score {
            text-align: center;
        }
        
        .score-label {
            font-size: 1.2rem;
            color: #a0a0c0;
            margin-bottom: 5px;
        }
        
        .score-value {
            font-size: 3.5rem;
            font-weight: bold;
            color: #fff;
        }
        
        .vs {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            color: #fc00ff;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 800px;
            background: rgba(15, 52, 96, 0.7);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .control-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .control-group {
            flex: 1;
            margin: 0 10px;
        }
        
        .control-title {
            font-size: 1.1rem;
            color: #00dbde;
            margin-bottom: 8px;
        }
        
        .control-desc {
            font-size: 0.95rem;
            color: #a0a0c0;
            line-height: 1.4;
        }
        
        .difficulty {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 800px;
            background: rgba(15, 52, 96, 0.7);
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 20px;
        }
        
        .difficulty label {
            font-size: 1.1rem;
            color: #00dbde;
        }
        
        select {
            background: #16213e;
            color: white;
            border: 2px solid #00dbde;
            border-radius: 5px;
            padding: 8px 15px;
            font-size: 1rem;
            cursor: pointer;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }
        
        button {
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        #pauseBtn {
            background: linear-gradient(90deg, #f46b45, #eea849);
        }
        
        #restartBtn {
            background: linear-gradient(90deg, #2193b0, #6dd5ed);
        }
        
        .instructions {
            background: rgba(15, 52, 96, 0.7);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            width: 100%;
            max-width: 800px;
        }
        
        .instructions h3 {
            color: #00dbde;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .instructions ul {
            padding-left: 20px;
            color: #a0a0c0;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .game-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            display: none;
            z-index: 10;
            box-shadow: 0 0 30px rgba(0, 219, 222, 0.5);
            border: 2px solid #00dbde;
        }
        
        .powerup-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 800px;
            background: rgba(15, 52, 96, 0.7);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            flex-direction: column;
        }
        
        .powerup-title {
            font-size: 1.2rem;
            color: #00dbde;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .powerup-icon {
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }
        
        .powerup-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .powerup-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff416c, #ff4b2b);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .powerup-ready .powerup-fill {
            background: linear-gradient(90deg, #00b09b, #96c93d);
            width: 100% !important;
            animation: ready-pulse 1.5s infinite;
        }
        
        .powerup-status {
            font-size: 0.9rem;
            color: #a0a0c0;
            text-align: center;
        }
        
        .keyboard-hint {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }
        
        .key {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #2d3436, #636e72);
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.2rem;
            color: white;
            box-shadow: 0 4px 0 #2d3436;
            margin: 0 5px;
        }
        
        .key-space {
            width: 150px;
        }
        
        .key.active {
            transform: translateY(4px);
            box-shadow: 0 0px 0 #2d3436;
            background: linear-gradient(135deg, #00dbde, #0093E9);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes ready-pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .game-ui {
                flex-direction: column;
            }
            
            .control-row {
                flex-direction: column;
            }
            
            .control-group {
                margin: 10px 0;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .score-value {
                font-size: 2.8rem;
            }
            
            .keyboard-hint {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>PING PONG</h1>
            <div class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ W/S –∏ —Å—É–ø–µ—Ä —É–¥–∞—Ä –Ω–∞ –ü–†–û–ë–ï–õ —Å –∫—É–ª–¥–∞—É–Ω–æ–º</div>
        </header>
        
        <div class="game-container">
            <div class="game-wrapper">
                <canvas id="gameCanvas" width="800" height="500"></canvas>
                <div id="gameMessage" class="game-message"></div>
            </div>
            
            <div class="score-board">
                <div class="player-score">
                    <div class="score-label">–ò–ì–†–û–ö</div>
                    <div id="playerScore" class="score-value">0</div>
                </div>
                
                <div class="vs">VS</div>
                
                <div class="computer-score">
                    <div class="score-label">–ö–û–ú–ü–¨–Æ–¢–ï–†</div>
                    <div id="computerScore" class="score-value">0</div>
                </div>
            </div>
            
            <div class="powerup-container" id="powerupContainer">
                <div class="powerup-title">
                    <span class="powerup-icon">üí•</span> –°–£–ü–ï–† –£–î–ê–† (–ü–†–û–ë–ï–õ)
                </div>
                <div class="powerup-bar">
                    <div class="powerup-fill" id="powerupFill"></div>
                </div>
                <div class="powerup-status" id="powerupStatus">–ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!</div>
                <div class="keyboard-hint">
                    <div class="key" id="keyW">W</div>
                    <div class="key" id="keyS">S</div>
                    <div class="key key-space" id="keySpace">–ü–†–û–ë–ï–õ</div>
                </div>
            </div>
            
            <div class="controls">
                <div class="control-row">
                    <div class="control-group">
                        <div class="control-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º</div>
                        <div class="control-desc">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ W (–≤–≤–µ—Ä—Ö) –∏ S (–≤–Ω–∏–∑) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π. –ü–†–û–ë–ï–õ - —Å—É–ø–µ—Ä —É–¥–∞—Ä —Å –∫—É–ª–¥–∞—É–Ω–æ–º 10 —Å–µ–∫—É–Ω–¥</div>
                    </div>
                    <div class="control-group">
                        <div class="control-title">–ò–ò —Å–æ–ø–µ—Ä–Ω–∏–∫–∞</div>
                        <div class="control-desc">–ö–æ–º–ø—å—é—Ç–µ—Ä –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –≤–∞—à–µ–º—É —Å—Ç–∏–ª—é –∏–≥—Ä—ã. –°—É–ø–µ—Ä —É–¥–∞—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –º—è—á–∞ –Ω–∞ 50% –∏ –º–µ–Ω—è–µ—Ç –µ–≥–æ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é</div>
                    </div>
                </div>
            </div>
            
            <div class="difficulty">
                <label for="difficulty">–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:</label>
                <select id="difficulty">
                    <option value="easy">–õ–µ–≥–∫–∏–π</option>
                    <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="hard">–°–ª–æ–∂–Ω—ã–π</option>
                    <option value="impossible">–ù–µ–≤–æ–∑–º–æ–∂–Ω—ã–π</option>
                </select>
            </div>
            
            <div class="buttons">
                <button id="startBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                <button id="pauseBtn">–ü–∞—É–∑–∞</button>
                <button id="restartBtn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
        </div>
        
        <div class="instructions">
            <h3>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</h3>
            <ul>
                <li><strong>W</strong> - –¥–≤–∏–≥–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –≤–≤–µ—Ä—Ö</li>
                <li><strong>S</strong> - –¥–≤–∏–≥–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –≤–Ω–∏–∑</li>
                <li><strong>–ü–†–û–ë–ï–õ</strong> - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—É–ø–µ—Ä —É–¥–∞—Ä (–∫—É–ª–¥–∞—É–Ω 10 —Å–µ–∫—É–Ω–¥)</li>
                <li>–°—É–ø–µ—Ä —É–¥–∞—Ä –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –º—è—á –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –≤–∞—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ –ø–æ–ª—è</li>
                <li>–°—É–ø–µ—Ä —É–¥–∞—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –º—è—á–∞ –Ω–∞ 50% –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏</li>
                <li>–ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ 11 –æ—á–∫–æ–≤, –Ω–æ —Å —Ä–∞–∑–Ω–∏—Ü–µ–π –º–∏–Ω–∏–º—É–º –≤ 2 –æ—á–∫–∞</li>
                <li>–ò–ò –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –≤–∞—à–µ–º—É —Å—Ç–∏–ª—é –∏–≥—Ä—ã, —É—Å–ª–æ–∂–Ω—è—è—Å—å —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º</li>
            </ul>
        </div>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const playerScoreElement = document.getElementById('playerScore');
        const computerScoreElement = document.getElementById('computerScore');
        const gameMessageElement = document.getElementById('gameMessage');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const restartBtn = document.getElementById('restartBtn');
        const difficultySelect = document.getElementById('difficulty');
        const powerupContainer = document.getElementById('powerupContainer');
        const powerupFill = document.getElementById('powerupFill');
        const powerupStatus = document.getElementById('powerupStatus');
        const keyW = document.getElementById('keyW');
        const keyS = document.getElementById('keyS');
        const keySpace = document.getElementById('keySpace');
        
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã
        const PADDLE_WIDTH = 12;
        const PADDLE_HEIGHT = 100;
        const BALL_SIZE = 15;
        const WINNING_SCORE = 11;
        const SUPER_SHOT_COOLDOWN = 10000; // 10 —Å–µ–∫—É–Ω–¥ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let playerScore = 0;
        let computerScore = 0;
        let gameRunning = false;
        let gamePaused = false;
        let animationFrameId = null;
        let lastTime = 0;
        let keys = {};
        let superShotAvailable = true;
        let superShotCooldown = 0;
        let superShotActive = false;
        let superShotTimer = 0;
        const SUPER_SHOT_DURATION = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª–∏—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞
        
        // –û–±—ä–µ–∫—Ç—ã –∏–≥—Ä—ã
        const playerPaddle = {
            x: 30,
            y: canvas.height / 2 - PADDLE_HEIGHT / 2,
            width: PADDLE_WIDTH,
            height: PADDLE_HEIGHT,
            speed: 0,
            maxSpeed: 8
        };
        
        const computerPaddle = {
            x: canvas.width - 30 - PADDLE_WIDTH,
            y: canvas.height / 2 - PADDLE_HEIGHT / 2,
            width: PADDLE_WIDTH,
            height: PADDLE_HEIGHT,
            speed: 0,
            maxSpeed: 6,
            reactionTime: 0.4,
            accuracy: 0.85
        };
        
        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            width: BALL_SIZE,
            height: BALL_SIZE,
            speedX: 5,
            speedY: 3,
            maxSpeed: 12,
            originalSpeedX: 5,
            originalSpeedY: 3
        };
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã - –ò–°–ü–†–ê–í–õ–ï–ù–û
        window.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            keys[key] = true;
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–∂–∞—Ç—ã—Ö –∫–ª–∞–≤–∏—à
            if (key === 'w') {
                keyW.classList.add('active');
            }
            if (key === 's') {
                keyS.classList.add('active');
            }
            if (e.key === ' ') {
                keySpace.classList.add('active');
                e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø—Ä–æ–±–µ–ª–∞
                
                // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞ - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞, –Ω–µ –Ω–∞ –ø–∞—É–∑–µ –∏ —Å—É–ø–µ—Ä —É–¥–∞—Ä –¥–æ—Å—Ç—É–ø–µ–Ω
                if (gameRunning && !gamePaused && superShotAvailable && ball.speedX < 0) {
                    activateSuperShot();
                }
            }
            
            // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            console.log(`Key down: ${key}, keys['w'] = ${keys['w']}, keys['s'] = ${keys['s']}`);
        });
        
        window.addEventListener('keyup', (e) => {
            const key = e.key.toLowerCase();
            keys[key] = false;
            
            // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–ª–∞–≤–∏—à
            if (key === 'w') {
                keyW.classList.remove('active');
            }
            if (key === 's') {
                keyS.classList.remove('active');
            }
            if (e.key === ' ') {
                keySpace.classList.remove('active');
                e.preventDefault();
            }
            
            // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            console.log(`Key up: ${key}, keys['w'] = ${keys['w']}, keys['s'] = ${keys['s']}`);
        });
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        function setDifficulty() {
            const difficulty = difficultySelect.value;
            
            switch(difficulty) {
                case 'easy':
                    computerPaddle.maxSpeed = 4;
                    computerPaddle.reactionTime = 0.6;
                    computerPaddle.accuracy = 0.7;
                    break;
                case 'medium':
                    computerPaddle.maxSpeed = 6;
                    computerPaddle.reactionTime = 0.4;
                    computerPaddle.accuracy = 0.85;
                    break;
                case 'hard':
                    computerPaddle.maxSpeed = 8;
                    computerPaddle.reactionTime = 0.25;
                    computerPaddle.accuracy = 0.95;
                    break;
                case 'impossible':
                    computerPaddle.maxSpeed = 10;
                    computerPaddle.reactionTime = 0.1;
                    computerPaddle.accuracy = 0.99;
                    break;
            }
        }
        
        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        startBtn.addEventListener('click', () => {
            if (!gameRunning) {
                startGame();
            }
        });
        
        // –ü–∞—É–∑–∞ –∏–≥—Ä—ã
        pauseBtn.addEventListener('click', () => {
            if (gameRunning) {
                togglePause();
            }
        });
        
        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        restartBtn.addEventListener('click', () => {
            resetGame();
            startGame();
        });
        
        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        difficultySelect.addEventListener('change', () => {
            setDifficulty();
        });
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞
        function activateSuperShot() {
            if (!superShotAvailable || ball.speedX > 0) return;
            
            superShotAvailable = false;
            superShotActive = true;
            superShotTimer = SUPER_SHOT_DURATION;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
            ball.originalSpeedX = ball.speedX;
            ball.originalSpeedY = ball.speedY;
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –º—è—á–∞ –Ω–∞ 50%
            ball.speedX *= 1.5;
            ball.speedY *= 1.5;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
            ball.speedY += (Math.random() - 0.5) * 4;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
            const currentSpeed = Math.sqrt(ball.speedX * ball.speedX + ball.speedY * ball.speedY);
            if (currentSpeed > ball.maxSpeed * 1.5) {
                const ratio = (ball.maxSpeed * 1.5) / currentSpeed;
                ball.speedX *= ratio;
                ball.speedY *= ratio;
            }
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
            powerupContainer.classList.add('powerup-ready');
            powerupStatus.textContent = "–°–£–ü–ï–† –£–î–ê–† –ê–ö–¢–ò–í–ï–ù!";
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∫—É–ª–¥–∞—É–Ω
            superShotCooldown = SUPER_SHOT_COOLDOWN;
            
            console.log("–°—É–ø–µ—Ä —É–¥–∞—Ä –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!");
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞
        function updateSuperShot(deltaTime) {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞
            if (superShotActive) {
                superShotTimer -= deltaTime * 16;
                
                if (superShotTimer <= 0) {
                    superShotActive = false;
                    
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –º—è—á–∞
                    ball.speedX = ball.originalSpeedX;
                    ball.speedY = ball.originalSpeedY;
                    
                    powerupContainer.classList.remove('powerup-ready');
                    
                    console.log("–°—É–ø–µ—Ä —É–¥–∞—Ä –∑–∞–∫–æ–Ω—á–∏–ª—Å—è");
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫—É–ª–¥–∞—É–Ω
            if (!superShotAvailable) {
                superShotCooldown -= deltaTime * 16;
                const percentage = 100 - (superShotCooldown / SUPER_SHOT_COOLDOWN) * 100;
                powerupFill.style.width = `${percentage}%`;
                
                if (superShotCooldown <= 0) {
                    superShotAvailable = true;
                    superShotCooldown = 0;
                    powerupFill.style.width = "100%";
                    powerupStatus.textContent = "–ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!";
                    powerupContainer.classList.add('powerup-ready');
                    
                    console.log("–°—É–ø–µ—Ä —É–¥–∞—Ä –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∏–ª—Å—è");
                } else {
                    const secondsLeft = Math.ceil(superShotCooldown / 1000);
                    powerupStatus.textContent = `–ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞: ${secondsLeft} —Å–µ–∫.`;
                    powerupContainer.classList.remove('powerup-ready');
                }
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            gameRunning = true;
            gamePaused = false;
            gameMessageElement.style.display = 'none';
            lastTime = performance.now();
            
            // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞–≤–∏—à –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã
            keys = {};
            
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
            }
            
            animationFrameId = requestAnimationFrame(gameLoop);
            
            console.log("–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å");
        }
        
        // –ü–∞—É–∑–∞/–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
        function togglePause() {
            gamePaused = !gamePaused;
            
            if (gamePaused) {
                gameMessageElement.textContent = "–ü–ê–£–ó–ê";
                gameMessageElement.style.display = 'block';
                console.log("–ò–≥—Ä–∞ –Ω–∞ –ø–∞—É–∑–µ");
            } else {
                gameMessageElement.style.display = 'none';
                lastTime = performance.now();
                animationFrameId = requestAnimationFrame(gameLoop);
                console.log("–ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è");
            }
        }
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            playerScore = 0;
            computerScore = 0;
            updateScore();
            
            resetBall();
            
            playerPaddle.y = canvas.height / 2 - PADDLE_HEIGHT / 2;
            computerPaddle.y = canvas.height / 2 - PADDLE_HEIGHT / 2;
            
            // –°–±—Ä–æ—Å —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞
            superShotAvailable = true;
            superShotCooldown = 0;
            superShotActive = false;
            powerupFill.style.width = "100%";
            powerupStatus.textContent = "–ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!";
            powerupContainer.classList.add('powerup-ready');
            
            // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞–≤–∏—à
            keys = {};
            keyW.classList.remove('active');
            keyS.classList.remove('active');
            keySpace.classList.remove('active');
            
            setDifficulty();
            
            console.log("–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞");
        }
        
        // –°–±—Ä–æ—Å –º—è—á–∞
        function resetBall() {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            
            // –°–ª—É—á–∞–π–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            ball.speedX = (Math.random() > 0.5 ? 1 : -1) * 5;
            ball.speedY = (Math.random() * 2 - 1) * 3;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
            ball.originalSpeedX = ball.speedX;
            ball.originalSpeedY = ball.speedY;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
        function updateScore() {
            playerScoreElement.textContent = playerScore;
            computerScoreElement.textContent = computerScore;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
        function checkWin() {
            if (playerScore >= WINNING_SCORE && playerScore >= computerScore + 2) {
                gameMessageElement.textContent = "–í–´ –ü–û–ë–ï–î–ò–õ–ò!";
                gameMessageElement.style.display = 'block';
                gameRunning = false;
                return true;
            }
            
            if (computerScore >= WINNING_SCORE && computerScore >= playerScore + 2) {
                gameMessageElement.textContent = "–ö–û–ú–ü–¨–Æ–¢–ï–† –ü–û–ë–ï–î–ò–õ!";
                gameMessageElement.style.display = 'block';
                gameRunning = false;
                return true;
            }
            
            return false;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–º - –ò–°–ü–†–ê–í–õ–ï–ù–û
        function updatePlayerPaddle(deltaTime) {
            // –û–±–Ω—É–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
            playerPaddle.speed = 0;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–∂–∞—Ç—ã–µ –∫–ª–∞–≤–∏—à–∏
            if (keys['w']) {
                playerPaddle.speed = -playerPaddle.maxSpeed;
            }
            
            if (keys['s']) {
                playerPaddle.speed = playerPaddle.maxSpeed;
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å —É—á–µ—Ç–æ–º deltaTime –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
            playerPaddle.y += playerPaddle.speed * deltaTime;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö canvas
            playerPaddle.y = Math.max(
                0, 
                Math.min(canvas.height - playerPaddle.height, playerPaddle.y)
            );
            
            // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            if (keys['w'] || keys['s']) {
                console.log(`–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: W=${keys['w']}, S=${keys['s']}, paddleY=${playerPaddle.y}`);
            }
        }
        
        // –ò–ò –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
        function updateComputerPaddle() {
            // –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –º—è—á–∞
            let predictedY = ball.y;
            
            // –ï—Å–ª–∏ –º—è—á –¥–≤–∏–∂–µ—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
            if (ball.speedX > 0) {
                // –í—Ä–µ–º—è, –∑–∞ –∫–æ—Ç–æ—Ä–æ–µ –º—è—á –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
                const timeToReach = (computerPaddle.x - ball.x) / ball.speedX;
                predictedY = ball.y + ball.speedY * timeToReach;
                
                // –û—Ç—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç –≤–µ—Ä—Ö–Ω–µ–π –∏ –Ω–∏–∂–Ω–µ–π —Å—Ç–µ–Ω–æ–∫
                while (predictedY < 0 || predictedY > canvas.height) {
                    if (predictedY < 0) {
                        predictedY = -predictedY;
                    } else if (predictedY > canvas.height) {
                        predictedY = 2 * canvas.height - predictedY;
                    }
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏
            const error = (1 - computerPaddle.accuracy) * canvas.height * (Math.random() - 0.5);
            predictedY += error;
            
            // –¶–µ–Ω—Ç—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
            const computerCenter = computerPaddle.y + computerPaddle.height / 2;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
            let direction = 0;
            if (Math.abs(computerCenter - predictedY) > computerPaddle.height * 0.2) {
                direction = predictedY > computerCenter ? 1 : -1;
            }
            
            // –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–∫—Ü–∏–∏
            computerPaddle.speed = direction * computerPaddle.maxSpeed * computerPaddle.reactionTime;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
            computerPaddle.y += computerPaddle.speed;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö canvas
            computerPaddle.y = Math.max(
                0, 
                Math.min(canvas.height - computerPaddle.height, computerPaddle.y)
            );
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º—è—á–∞
        function updateBall(deltaTime) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –º—è—á–∞
            ball.x += ball.speedX * deltaTime;
            ball.y += ball.speedY * deltaTime;
            
            // –û—Ç—Å–∫–æ–∫ –æ—Ç –≤–µ—Ä—Ö–Ω–µ–π –∏ –Ω–∏–∂–Ω–µ–π —Å—Ç–µ–Ω–æ–∫
            if (ball.y <= 0 || ball.y + ball.height >= canvas.height) {
                ball.speedY = -ball.speedY;
                
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é, —á—Ç–æ–±—ã –º—è—á –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞–ª –≤ —Å—Ç–µ–Ω–∫–µ
                ball.y = ball.y <= 0 ? 0 : canvas.height - ball.height;
            }
            
            // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏–≥—Ä–æ–∫–∞
            if (
                ball.x <= playerPaddle.x + playerPaddle.width &&
                ball.x + ball.width >= playerPaddle.x &&
                ball.y <= playerPaddle.y + playerPaddle.height &&
                ball.y + ball.height >= playerPaddle.y
            ) {
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é –º—è—á–∞
                ball.x = playerPaddle.x + playerPaddle.width;
                
                // –ò–∑–º–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
                ball.speedX = Math.abs(ball.speedX) * 1.05;
                
                // –£–≥–æ–ª –æ—Ç—Å–∫–æ–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫—É–¥–∞ –ø–æ–ø–∞–ª –º—è—á –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
                const hitPoint = (ball.y + ball.height/2 - playerPaddle.y) / playerPaddle.height;
                ball.speedY = (hitPoint - 0.5) * 10;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å (–µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω —Å—É–ø–µ—Ä —É–¥–∞—Ä)
                if (!superShotActive) {
                    const currentSpeed = Math.sqrt(ball.speedX * ball.speedX + ball.speedY * ball.speedY);
                    if (currentSpeed > ball.maxSpeed) {
                        const ratio = ball.maxSpeed / currentSpeed;
                        ball.speedX *= ratio;
                        ball.speedY *= ratio;
                    }
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
                    ball.originalSpeedX = ball.speedX;
                    ball.originalSpeedY = ball.speedY;
                }
            }
            
            // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
            if (
                ball.x + ball.width >= computerPaddle.x &&
                ball.x <= computerPaddle.x + computerPaddle.width &&
                ball.y <= computerPaddle.y + computerPaddle.height &&
                ball.y + ball.height >= computerPaddle.y
            ) {
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é –º—è—á–∞
                ball.x = computerPaddle.x - ball.width;
                
                // –ò–∑–º–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
                ball.speedX = -Math.abs(ball.speedX) * 1.05;
                
                // –£–≥–æ–ª –æ—Ç—Å–∫–æ–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫—É–¥–∞ –ø–æ–ø–∞–ª –º—è—á –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
                const hitPoint = (ball.y + ball.height/2 - computerPaddle.y) / computerPaddle.height;
                ball.speedY = (hitPoint - 0.5) * 10;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
                const currentSpeed = Math.sqrt(ball.speedX * ball.speedX + ball.speedY * ball.speedY);
                if (currentSpeed > ball.maxSpeed) {
                    const ratio = ball.maxSpeed / currentSpeed;
                    ball.speedX *= ratio;
                    ball.speedY *= ratio;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
                ball.originalSpeedX = ball.speedX;
                ball.originalSpeedY = ball.speedY;
                
                // –ï—Å–ª–∏ —Å—É–ø–µ—Ä —É–¥–∞—Ä –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω, –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ –ø–æ—Å–ª–µ –æ—Ç—Å–∫–æ–∫–∞ –æ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
                if (superShotActive) {
                    superShotActive = false;
                    powerupContainer.classList.remove('powerup-ready');
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≥–æ–ª
            if (ball.x < 0) {
                computerScore++;
                updateScore();
                resetBall();
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—É–ø–µ—Ä —É–¥–∞—Ä –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –≥–æ–ª–∞
                if (superShotActive) {
                    superShotActive = false;
                    powerupContainer.classList.remove('powerup-ready');
                }
                
                if (checkWin()) {
                    return;
                }
            } else if (ball.x > canvas.width) {
                playerScore++;
                updateScore();
                resetBall();
                
                if (checkWin()) {
                    return;
                }
            }
        }
        
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä—ã
        function draw() {
            // –û—á–∏—Å—Ç–∫–∞ canvas
            ctx.fillStyle = '#0f3460';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –ª–∏–Ω–∏—é
            ctx.setLineDash([10, 10]);
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.setLineDash([]);
            
            // –†–∏—Å—É–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏–≥—Ä–æ–∫–∞
            ctx.fillStyle = '#00dbde';
            ctx.fillRect(playerPaddle.x, playerPaddle.y, playerPaddle.width, playerPaddle.height);
            
            // –†–∏—Å—É–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
            ctx.fillStyle = '#fc00ff';
            ctx.fillRect(computerPaddle.x, computerPaddle.y, computerPaddle.width, computerPaddle.height);
            
            // –†–∏—Å—É–µ–º –º—è—á
            if (superShotActive) {
                // –≠—Ñ—Ñ–µ–∫—Ç —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞ - –º–µ—Ä—Ü–∞—é—â–∏–π –º—è—á
                const time = Date.now() * 0.01;
                const intensity = Math.sin(time) * 0.5 + 0.5;
                ctx.fillStyle = `rgb(255, ${255 - intensity * 150}, ${255 - intensity * 200})`;
                
                // –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è
                ctx.shadowColor = '#ff416c';
                ctx.shadowBlur = 15;
            } else {
                ctx.fillStyle = '#ffffff';
                ctx.shadowBlur = 0;
            }
            
            ctx.beginPath();
            ctx.ellipse(
                ball.x + ball.width/2, 
                ball.y + ball.height/2, 
                ball.width/2, 
                ball.height/2, 
                0, 0, Math.PI * 2
            );
            ctx.fill();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç –∫ –º—è—á—É
            const gradient = ctx.createRadialGradient(
                ball.x + ball.width/2, 
                ball.y + ball.height/2, 
                0,
                ball.x + ball.width/2, 
                ball.y + ball.height/2, 
                ball.width/2
            );
            
            if (superShotActive) {
                gradient.addColorStop(0, '#ffffff');
                gradient.addColorStop(0.5, '#ff416c');
                gradient.addColorStop(1, '#ff4b2b');
            } else {
                gradient.addColorStop(0, '#ffffff');
                gradient.addColorStop(1, '#a0a0c0');
            }
            
            ctx.fillStyle = gradient;
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞ –Ω–∞ –ø–æ–ª–µ
            if (!superShotAvailable && ball.speedX < 0) {
                const cooldownPercent = 1 - (superShotCooldown / SUPER_SHOT_COOLDOWN);
                const radius = 5 + cooldownPercent * 10;
                
                ctx.beginPath();
                ctx.arc(playerPaddle.x + playerPaddle.width + 15, playerPaddle.y + playerPaddle.height/2, radius, 0, Math.PI * 2);
                ctx.fillStyle = superShotActive ? '#ff416c' : 'rgba(255, 65, 108, 0.5)';
                ctx.fill();
            }
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop(currentTime) {
            if (!gameRunning || gamePaused) return;
            
            // –í—ã—á–∏—Å–ª—è–µ–º deltaTime –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
            const deltaTime = Math.min((currentTime - lastTime) / 16, 3); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º deltaTime
            lastTime = currentTime;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–≥–∏–∫—É –∏–≥—Ä—ã
            updatePlayerPaddle(deltaTime);
            updateComputerPaddle();
            updateBall(deltaTime);
            updateSuperShot(deltaTime);
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏–≥—Ä—É
            draw();
            
            // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            animationFrameId = requestAnimationFrame(gameLoop);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function init() {
            setDifficulty();
            draw();
            
            // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            gameMessageElement.textContent = "–ù–ê–ñ–ú–ò–¢–ï '–ù–ê–ß–ê–¢–¨ –ò–ì–†–£'";
            gameMessageElement.style.display = 'block';
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—É–ø–µ—Ä —É–¥–∞—Ä
            powerupContainer.classList.add('powerup-ready');
            
            console.log("–ò–≥—Ä–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: W/S –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è, –ü–†–û–ë–ï–õ –¥–ª—è —Å—É–ø–µ—Ä —É–¥–∞—Ä–∞");
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = init;
    </script>
</body>
</html>
